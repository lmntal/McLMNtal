state_space.use.
set.use.

% 
% byzantine
% 

counterexample(X) :- uniq |
    ret = val(X,
	      	     {

shirei(true) :- shirei(true,a).
shirei(true) :- shirei(true,b).

shirei(true,Cmd),i(I),p{ no(N),$p }
 :- I=:=N,II=I+1,unary(Cmd)
 | shirei(true,Cmd),i(II),p{ no(N),send(Cmd),ret(Cmd),$p }.

shirei(false),i(I),p{ no(N),$p }
 :- I=:=N,II=I+1
 | shirei(false),i(II),p{ no(N),send(a),ret(a),$p }.
shirei(false),i(I),p{ no(N),$p }
 :- I=:=N,II=I+1
 | shirei(false),i(II),p{ no(N),send(b),ret(b),$p }.


s(S1,S2) :- S1=:=S2,S2I=S2+1 | s(S1,S2I).
s(S1,S2),person(P) :- S2=:=P,S1I=S1+1 | s(S1I,1),person(P).


p{ no(N1),send(Cmd),valid(true),$p1 },p{ no(N2),$p2 },s(M1,M2)
 :- N1=:=M1,N2=:=M2,M2I=M2+1,unary(Cmd)
 | p{ no(N1),send(Cmd),valid(true),$p1 },p{ no(N2),ret(Cmd),$p2 },s(M1,M2I).

p{ no(N1),send(Cmd),valid(false),$p1 },p{ no(N2),$p2 },s(M1,M2)
 :- N1=:=M1,N2=:=M2,M2I=M2+1,unary(Cmd)
 | p{ no(N1),send(Cmd),valid(false),$p1 },p{ no(N2),ret(a),$p2 },s(M1,M2I).
p{ no(N1),send(Cmd),valid(false),$p1 },p{ no(N2),$p2 },s(M1,M2)
 :- N1=:=M1,N2=:=M2,M2I=M2+1,unary(Cmd)
 | p{ no(N1),send(Cmd),valid(false),$p1 },p{ no(N2),ret(b),$p2 },s(M1,M2I).

p{ ret(a),a(A),$p } :- AI=A+1 | p{ a(AI),$p }.
p{ ret(b),b(B),$p } :- BI=B+1 | p{ b(BI),$p }.


p{ no(N),valid(true),a(A),b(B),send(Cmd) },sumA(SA),person(P),s(S,1)
 :- S=:=P,A>=B,SAI=SA+1,int(N),unary(Cmd)
 | sumA(SAI),person(P),s(S,1).
p{ no(N),valid(true),a(A),b(B),send(Cmd) },sumB(SB),person(P),s(S,1)
 :- S=:=P,A<B, SBI=SB+1,int(N),unary(Cmd)
 | sumB(SBI),person(P),s(S,1).

	     },
ba([0, 1], [d(0, true, 0), d(0, and(not(!A), not(!B)), 1), d(1, and(not(!A), not(!B)), 1)], [0], [1])),
  pred({sumA(0), sumB('$x')}, {'>'('$x', 0)}, !A),
  pred({sumB(0), sumA('$x')}, {'>'('$x', 0)}, !B).



% 
% phiM
% 
/* 
:- uniq| ret = val(
[[{n(7). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). chopstick(7). {phi(7). state(thinking). noOfSticks(0). }, {phi(6). state(thinking). noOfSticks(0). }, {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(thinking). noOfSticks(0). }, {phi(3). state(thinking). noOfSticks(0). }, {phi(2). state(thinking). noOfSticks(0). }, {phi(1). state(thinking). noOfSticks(0). }. }|0],[{n(7). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). chopstick(7). {phi(7). state(thinking). noOfSticks(0). }, {phi(6). state(thinking). noOfSticks(0). }, {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(thinking). noOfSticks(0). }, {phi(3). state(thinking). noOfSticks(0). }, {phi(2). state(thinking). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|0],[{n(7). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). chopstick(7). {phi(7). state(thinking). noOfSticks(0). }, {phi(6). state(thinking). noOfSticks(0). }, {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(thinking). noOfSticks(0). }, {phi(3). state(thinking). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(7). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). chopstick(7). {phi(7). state(thinking). noOfSticks(0). }, {phi(6). state(thinking). noOfSticks(0). }, {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(thinking). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(7). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). chopstick(7). {phi(7). state(thinking). noOfSticks(0). }, {phi(6). state(thinking). noOfSticks(0). }, {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(7). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). chopstick(7). {phi(7). state(thinking). noOfSticks(0). }, {phi(6). state(thinking). noOfSticks(0). }, {phi(5). state(hungry). noOfSticks(0). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(7). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). chopstick(7). {phi(7). state(thinking). noOfSticks(0). }, {phi(6). state(hungry). noOfSticks(0). }, {phi(5). state(hungry). noOfSticks(0). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(7). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). chopstick(7). {phi(7). state(hungry). noOfSticks(0). }, {phi(6). state(hungry). noOfSticks(0). }, {phi(5). state(hungry). noOfSticks(0). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(7). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). {phi(7). state(hungry). noOfSticks(1). }, {phi(6). state(hungry). noOfSticks(0). }, {phi(5). state(hungry). noOfSticks(0). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(7). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). {phi(7). state(hungry). noOfSticks(1). }, {phi(6). state(hungry). noOfSticks(1). }, {phi(5). state(hungry). noOfSticks(0). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(7). chopstick(1). chopstick(2). chopstick(3). chopstick(4). {phi(7). state(hungry). noOfSticks(1). }, {phi(6). state(hungry). noOfSticks(1). }, {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(7). chopstick(1). chopstick(2). chopstick(3). {phi(7). state(hungry). noOfSticks(1). }, {phi(6). state(hungry). noOfSticks(1). }, {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(7). chopstick(1). chopstick(2). {phi(7). state(hungry). noOfSticks(1). }, {phi(6). state(hungry). noOfSticks(1). }, {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(1). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(7). chopstick(1). {phi(7). state(hungry). noOfSticks(1). }, {phi(6). state(hungry). noOfSticks(1). }, {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(1). }, {phi(2). state(hungry). noOfSticks(1). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(7). {phi(7). state(hungry). noOfSticks(1). }, {phi(6). state(hungry). noOfSticks(1). }, {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(1). }, {phi(2). state(hungry). noOfSticks(1). }, {phi(1). state(hungry). noOfSticks(1). }. }|1],[{n(7). {phi(7). state(hungry). noOfSticks(1). }, {phi(6). state(hungry). noOfSticks(1). }, {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(1). }, {phi(2). state(hungry). noOfSticks(1). }, {phi(1). state(hungry). noOfSticks(1). }. }|1]],
//[[{n(6). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). {phi(6). state(thinking). noOfSticks(0). }, {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(thinking). noOfSticks(0). }, {phi(3). state(thinking). noOfSticks(0). }, {phi(2). state(thinking). noOfSticks(0). }, {phi(1). state(thinking). noOfSticks(0). }. }|0],[{n(6). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). {phi(6). state(thinking). noOfSticks(0). }, {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(thinking). noOfSticks(0). }, {phi(3). state(thinking). noOfSticks(0). }, {phi(2). state(thinking). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|0],[{n(6). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). {phi(6). state(thinking). noOfSticks(0). }, {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(thinking). noOfSticks(0). }, {phi(3). state(thinking). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(6). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). {phi(6). state(thinking). noOfSticks(0). }, {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(thinking). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(6). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). {phi(6). state(thinking). noOfSticks(0). }, {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(6). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). {phi(6). state(thinking). noOfSticks(0). }, {phi(5). state(hungry). noOfSticks(0). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(6). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). chopstick(6). {phi(6). state(hungry). noOfSticks(0). }, {phi(5). state(hungry). noOfSticks(0). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(6). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). {phi(6). state(hungry). noOfSticks(1). }, {phi(5). state(hungry). noOfSticks(0). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(6). chopstick(1). chopstick(2). chopstick(3). chopstick(4). {phi(6). state(hungry). noOfSticks(1). }, {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(6). chopstick(1). chopstick(2). chopstick(3). {phi(6). state(hungry). noOfSticks(1). }, {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(6). chopstick(1). chopstick(2). {phi(6). state(hungry). noOfSticks(1). }, {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(1). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(6). chopstick(1). {phi(6). state(hungry). noOfSticks(1). }, {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(1). }, {phi(2). state(hungry). noOfSticks(1). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(6). {phi(6). state(hungry). noOfSticks(1). }, {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(1). }, {phi(2). state(hungry). noOfSticks(1). }, {phi(1). state(hungry). noOfSticks(1). }. }|1],[{n(6). {phi(6). state(hungry). noOfSticks(1). }, {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(1). }, {phi(2). state(hungry). noOfSticks(1). }, {phi(1). state(hungry). noOfSticks(1). }. }|1]],
//[[{n(5). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(thinking). noOfSticks(0). }, {phi(3). state(thinking). noOfSticks(0). }, {phi(2). state(thinking). noOfSticks(0). }, {phi(1). state(thinking). noOfSticks(0). }. }|0],[{n(5). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(thinking). noOfSticks(0). }, {phi(3). state(thinking). noOfSticks(0). }, {phi(2). state(thinking). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|0],[{n(5). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(thinking). noOfSticks(0). }, {phi(3). state(thinking). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(5). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(thinking). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(5). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). {phi(5). state(thinking). noOfSticks(0). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(5). chopstick(1). chopstick(2). chopstick(3). chopstick(4). chopstick(5). {phi(5). state(hungry). noOfSticks(0). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(5). chopstick(1). chopstick(2). chopstick(3). chopstick(4). {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(0). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(5). chopstick(1). chopstick(2). chopstick(3). {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(0). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(5). chopstick(1). chopstick(2). {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(1). }, {phi(2). state(hungry). noOfSticks(0). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(5). chopstick(1). {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(1). }, {phi(2). state(hungry). noOfSticks(1). }, {phi(1). state(hungry). noOfSticks(0). }. }|1],[{n(5). {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(1). }, {phi(2). state(hungry). noOfSticks(1). }, {phi(1). state(hungry). noOfSticks(1). }. }|1],[{n(5). {phi(5). state(hungry). noOfSticks(1). }, {phi(4). state(hungry). noOfSticks(1). }, {phi(3). state(hungry). noOfSticks(1). }, {phi(2). state(hungry). noOfSticks(1). }, {phi(1). state(hungry). noOfSticks(1). }. }|1]],
	     {
	hungry__ @@ {phi=I, state=thinking, $p} :- int(I) |
            {phi=I, state=hungry,   $p}.
	grab1stL @@ {phi=I, state=hungry,   noOfSticks=0}, chopstick(J) :- J=:=I |
            {phi=I, state=hungry,   noOfSticks=1}.
	grab1stR @@ {phi=I, state=hungry,   noOfSticks=0}, n(N), chopstick(J) :- J=:=I mod N + 1 |
            {phi=I, state=hungry,   noOfSticks=1}, n(N).
	grab2ndL @@ {phi=I, state=hungry,   noOfSticks=1}, chopstick(J) :- J=:=I |
            {phi=I, state=eating,   noOfSticks=2}.
	grab2ndR @@ {phi=I, state=hungry,   noOfSticks=1}, n(N), chopstick(J) :- J=:=I mod N + 1 |
            {phi=I, state=eating,   noOfSticks=2}, n(N).
	stopEat_ @@ {phi=I, state=eating,   noOfSticks=J}, n(N) :- int(J), C=(I mod N)+1 |
            {phi=I, state=thinking, noOfSticks=0}, n(N), chopstick(I), chopstick(C).
	     },
	     ba([0, 1], [d(0, true, 0), d(0, and(not(!P), !Q), 1), d(1, not(!P), 1)], [0], [1])),
pred({{phi(1), state(eating), '$s'}}, {}, !P),
pred({{phi(1), state(hungry), '$s'}}, {}, !Q).
*/



//rab8
//counterexample([[{init([x,x,x,x,x,x,x,x,free,o,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,free,x,o,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,o,x,free,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,o,x,o,free,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,o,free,o,x,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,free,o,x,o,x,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,free,x,o,x,o,x,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,free,x,o,x,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,o,x,free,x,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,o,x,o,x,free,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,o,x,o,x,o,free,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,o,x,o,free,o,x,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,o,free,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,free,o,x,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,x,free,o,x,o,x,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,free,x,o,x,o,x,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,o,x,free,x,o,x,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,o,x,o,x,free,x,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,free,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,o,x,free,x,o,o,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,o,x,o,x,free,o,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,o,x,o,x,o,free,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,o,x,o,free,o,x,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,o,free,o,x,o,x,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,free,o,x,o,x,o,x,o,o]). }|0],[{init([x,x,x,o,x,o,free,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,x,x,o,free,o,x,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,x,free,o,x,o,x,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,free,x,o,x,o,x,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,o,x,free,x,o,x,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,o,x,o,x,free,x,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,o,x,o,x,o,x,free,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,o,x,o,x,o,x,o,x,free,x,o,x,o,x,o,o]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,free,x,o,x,o,o]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,o,x,free,x,o,o]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,free,o]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,free]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,o,x,o,free,o,x]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,o,free,o,x,o,x]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,free,o,x,o,x,o,x]). }|0],[{init([x,o,x,o,x,o,x,o,free,o,x,o,x,o,x,o,x]). }|0],[{init([x,o,x,o,x,o,free,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([x,o,x,o,free,o,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([x,o,free,o,x,o,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([free,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([o,free,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([o,o,x,free,x,o,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([o,o,x,o,x,free,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([o,o,x,o,x,o,x,free,x,o,x,o,x,o,x,o,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,free,x,o,x,o,x,o,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,x,free,x,o,x,o,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,x,o,x,free,x,o,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,x,o,x,o,x,free,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,x,o,x,o,free,x,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,x,o,free,o,x,x,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,free,o,x,o,x,x,x]). }|0],[{init([o,o,x,o,x,o,x,o,free,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,x,o,x,o,free,o,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,x,o,free,o,x,o,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,free,o,x,o,x,o,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,o,free,x,o,x,o,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,o,o,x,free,x,o,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,free,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,x,free,x,o,x,o,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,x,o,x,free,x,o,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,x,o,x,o,x,free,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,x,o,x,o,free,x,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,x,o,free,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,free,o,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,x,o,free,o,x,o,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,free,o,x,o,x,o,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,free,x,o,x,o,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,x,free,x,o,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,x,o,x,free,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,x,o,x,o,x,free,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,x,o,x,o,free,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,x,o,free,o,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,free,o,x,o,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,free,x,o,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,x,free,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,free,x,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,free,x,x,x,x,x,x,x,x]). }|1],[{init([o,o,o,o,o,o,o,o,free,x,x,x,x,x,x,x,x]). }|1]]).

//rab9
//counterexample([[{init([x,x,x,x,x,x,x,x,x,free,o,o,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,x,free,x,o,o,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,x,o,x,free,o,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,x,o,x,o,free,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,x,o,free,o,x,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,free,o,x,o,x,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,free,x,o,x,o,x,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,o,x,free,x,o,x,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,o,x,o,x,free,x,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,o,x,o,x,o,x,free,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,o,x,o,x,o,x,o,free,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,o,x,o,x,o,free,o,x,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,o,x,o,free,o,x,o,x,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,o,free,o,x,o,x,o,x,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,free,o,x,o,x,o,x,o,x,o,o,o,o,o]). }|0],[{init([x,x,x,x,free,x,o,x,o,x,o,x,o,x,o,o,o,o,o]). }|0],[{init([x,x,x,x,o,x,free,x,o,x,o,x,o,x,o,o,o,o,o]). }|0],[{init([x,x,x,x,o,x,o,x,free,x,o,x,o,x,o,o,o,o,o]). }|0],[{init([x,x,x,x,o,x,o,x,o,x,free,x,o,x,o,o,o,o,o]). }|0],[{init([x,x,x,x,o,x,o,x,o,x,o,x,free,x,o,o,o,o,o]). }|0],[{init([x,x,x,x,o,x,o,x,o,x,o,x,o,x,free,o,o,o,o]). }|0],[{init([x,x,x,x,o,x,o,x,o,x,o,x,o,x,o,free,o,o,o]). }|0],[{init([x,x,x,x,o,x,o,x,o,x,o,x,o,free,o,x,o,o,o]). }|0],[{init([x,x,x,x,o,x,o,x,o,x,o,free,o,x,o,x,o,o,o]). }|0],[{init([x,x,x,x,o,x,o,x,o,free,o,x,o,x,o,x,o,o,o]). }|0],[{init([x,x,x,x,o,x,o,free,o,x,o,x,o,x,o,x,o,o,o]). }|0],[{init([x,x,x,x,o,free,o,x,o,x,o,x,o,x,o,x,o,o,o]). }|0],[{init([x,x,x,free,o,x,o,x,o,x,o,x,o,x,o,x,o,o,o]). }|0],[{init([x,x,free,x,o,x,o,x,o,x,o,x,o,x,o,x,o,o,o]). }|0],[{init([x,x,o,x,free,x,o,x,o,x,o,x,o,x,o,x,o,o,o]). }|0],[{init([x,x,o,x,o,x,free,x,o,x,o,x,o,x,o,x,o,o,o]). }|0],[{init([x,x,o,x,o,x,o,x,free,x,o,x,o,x,o,x,o,o,o]). }|0],[{init([x,x,o,x,o,x,o,x,o,x,free,x,o,x,o,x,o,o,o]). }|0],[{init([x,x,o,x,o,x,o,x,o,x,o,x,free,x,o,x,o,o,o]). }|0],[{init([x,x,o,x,o,x,o,x,o,x,o,x,o,x,free,x,o,o,o]). }|0],[{init([x,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,free,o,o]). }|0],[{init([x,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,free,o]). }|0],[{init([x,x,o,x,o,x,o,x,o,x,o,x,o,x,o,free,o,x,o]). }|0],[{init([x,x,o,x,o,x,o,x,o,x,o,x,o,free,o,x,o,x,o]). }|0],[{init([x,x,o,x,o,x,o,x,o,x,o,free,o,x,o,x,o,x,o]). }|0],[{init([x,x,o,x,o,x,o,x,o,free,o,x,o,x,o,x,o,x,o]). }|0],[{init([x,x,o,x,o,x,o,free,o,x,o,x,o,x,o,x,o,x,o]). }|0],[{init([x,x,o,x,o,free,o,x,o,x,o,x,o,x,o,x,o,x,o]). }|0],[{init([x,x,o,free,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o]). }|0],[{init([x,free,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o]). }|0],[{init([free,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o]). }|0],[{init([o,x,free,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o]). }|0],[{init([o,x,o,x,free,x,o,x,o,x,o,x,o,x,o,x,o,x,o]). }|0],[{init([o,x,o,x,o,x,free,x,o,x,o,x,o,x,o,x,o,x,o]). }|0],[{init([o,x,o,x,o,x,o,x,free,x,o,x,o,x,o,x,o,x,o]). }|0],[{init([o,x,o,x,o,x,o,x,o,x,free,x,o,x,o,x,o,x,o]). }|0],[{init([o,x,o,x,o,x,o,x,o,x,o,x,free,x,o,x,o,x,o]). }|0],[{init([o,x,o,x,o,x,o,x,o,x,o,x,o,x,free,x,o,x,o]). }|0],[{init([o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,free,x,o]). }|0],[{init([o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,free]). }|0],[{init([o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,free,x]). }|0],[{init([o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,free,o,x,x]). }|0],[{init([o,x,o,x,o,x,o,x,o,x,o,x,o,free,o,x,o,x,x]). }|0],[{init([o,x,o,x,o,x,o,x,o,x,o,free,o,x,o,x,o,x,x]). }|0],[{init([o,x,o,x,o,x,o,x,o,free,o,x,o,x,o,x,o,x,x]). }|0],[{init([o,x,o,x,o,x,o,free,o,x,o,x,o,x,o,x,o,x,x]). }|0],[{init([o,x,o,x,o,free,o,x,o,x,o,x,o,x,o,x,o,x,x]). }|0],[{init([o,x,o,free,o,x,o,x,o,x,o,x,o,x,o,x,o,x,x]). }|0],[{init([o,free,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,x]). }|0],[{init([o,o,free,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,x]). }|0],[{init([o,o,o,x,free,x,o,x,o,x,o,x,o,x,o,x,o,x,x]). }|0],[{init([o,o,o,x,o,x,free,x,o,x,o,x,o,x,o,x,o,x,x]). }|0],[{init([o,o,o,x,o,x,o,x,free,x,o,x,o,x,o,x,o,x,x]). }|0],[{init([o,o,o,x,o,x,o,x,o,x,free,x,o,x,o,x,o,x,x]). }|0],[{init([o,o,o,x,o,x,o,x,o,x,o,x,free,x,o,x,o,x,x]). }|0],[{init([o,o,o,x,o,x,o,x,o,x,o,x,o,x,free,x,o,x,x]). }|0],[{init([o,o,o,x,o,x,o,x,o,x,o,x,o,x,o,x,free,x,x]). }|0],[{init([o,o,o,x,o,x,o,x,o,x,o,x,o,x,o,free,x,x,x]). }|0],[{init([o,o,o,x,o,x,o,x,o,x,o,x,o,free,o,x,x,x,x]). }|0],[{init([o,o,o,x,o,x,o,x,o,x,o,free,o,x,o,x,x,x,x]). }|0],[{init([o,o,o,x,o,x,o,x,o,free,o,x,o,x,o,x,x,x,x]). }|0],[{init([o,o,o,x,o,x,o,free,o,x,o,x,o,x,o,x,x,x,x]). }|0],[{init([o,o,o,x,o,free,o,x,o,x,o,x,o,x,o,x,x,x,x]). }|0],[{init([o,o,o,free,o,x,o,x,o,x,o,x,o,x,o,x,x,x,x]). }|0],[{init([o,o,o,o,free,x,o,x,o,x,o,x,o,x,o,x,x,x,x]). }|0],[{init([o,o,o,o,o,x,free,x,o,x,o,x,o,x,o,x,x,x,x]). }|0],[{init([o,o,o,o,o,x,o,x,free,x,o,x,o,x,o,x,x,x,x]). }|0],[{init([o,o,o,o,o,x,o,x,o,x,free,x,o,x,o,x,x,x,x]). }|0],[{init([o,o,o,o,o,x,o,x,o,x,o,x,free,x,o,x,x,x,x]). }|0],[{init([o,o,o,o,o,x,o,x,o,x,o,x,o,x,free,x,x,x,x]). }|0],[{init([o,o,o,o,o,x,o,x,o,x,o,x,o,free,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,x,o,x,o,x,o,free,o,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,x,o,x,o,free,o,x,o,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,x,o,free,o,x,o,x,o,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,free,o,x,o,x,o,x,o,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,free,x,o,x,o,x,o,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,x,free,x,o,x,o,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,x,o,x,free,x,o,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,x,o,x,o,x,free,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,x,o,x,o,free,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,x,o,free,o,x,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,free,o,x,o,x,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,free,x,o,x,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,o,x,free,x,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,o,free,x,x,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,o,free,x,x,x,x,x,x,x,x,x]). }|1],[{init([o,o,o,o,o,o,o,o,o,free,x,x,x,x,x,x,x,x,x]). }|1]]).
//counterexample([[{init([x,x,x,x,x,x,x,x,x,x,free,o,o,o,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,x,x,free,x,o,o,o,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,x,x,o,x,free,o,o,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,x,x,o,x,o,free,o,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,x,x,o,free,o,x,o,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,x,free,o,x,o,x,o,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,free,x,o,x,o,x,o,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,o,x,free,x,o,x,o,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,o,x,o,x,free,x,o,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,o,x,o,x,o,x,free,o,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,o,x,o,x,o,x,o,free,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,o,x,o,x,o,free,o,x,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,o,x,o,free,o,x,o,x,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,x,o,free,o,x,o,x,o,x,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,x,free,o,x,o,x,o,x,o,x,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,free,x,o,x,o,x,o,x,o,x,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,free,x,o,x,o,x,o,x,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,o,x,free,x,o,x,o,x,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,o,x,o,x,free,x,o,x,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,o,x,o,x,o,x,free,x,o,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,o,x,o,x,o,x,o,x,free,o,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,o,x,o,x,o,x,o,x,o,free,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,o,x,o,x,o,x,o,free,o,x,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,o,x,o,x,o,free,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,o,x,o,free,o,x,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,x,o,free,o,x,o,x,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,x,x,o,free,o,x,o,x,o,x,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,x,free,o,x,o,x,o,x,o,x,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,free,x,o,x,o,x,o,x,o,x,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,o,x,free,x,o,x,o,x,o,x,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,o,x,o,x,free,x,o,x,o,x,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,free,x,o,x,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,o,x,free,x,o,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,o,x,o,x,free,x,o,x,o,o,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,o,x,o,x,o,x,free,x,o,o,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,free,o,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,free,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,o,x,o,x,o,x,o,free,o,x,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,o,x,o,x,o,free,o,x,o,x,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,o,x,o,free,o,x,o,x,o,x,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,x,o,free,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,x,x,o,x,o,x,o,free,o,x,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,x,x,o,x,o,free,o,x,o,x,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,x,x,o,free,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,x,free,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,free,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,o,x,free,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,o,x,o,x,free,x,o,x,o,x,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,o,x,o,x,o,x,free,x,o,x,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,o,x,o,x,o,x,o,x,free,x,o,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,free,x,o,x,o,x,o,x,o,o]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,o,x,free,x,o,x,o,x,o,o]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,free,x,o,x,o,o]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,free,x,o,o]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,free,o]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,free]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,free,o,x]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,free,o,x,o,x]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,o,x,o,free,o,x,o,x,o,x]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,x,o,free,o,x,o,x,o,x,o,x]). }|0],[{init([x,o,x,o,x,o,x,o,x,o,free,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([x,o,x,o,x,o,x,o,free,o,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([x,o,x,o,x,o,free,o,x,o,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([x,o,x,o,free,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([x,o,free,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([free,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([o,free,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([o,o,x,free,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([o,o,x,o,x,free,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([o,o,x,o,x,o,x,free,x,o,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,free,x,o,x,o,x,o,x,o,x,o,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,x,free,x,o,x,o,x,o,x,o,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,x,o,x,free,x,o,x,o,x,o,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,x,o,x,o,x,free,x,o,x,o,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,free,x,o,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,free,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,free,x,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,free,o,x,x,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,x,o,x,o,free,o,x,o,x,x,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,x,o,free,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,x,o,x,o,x,o,x,o,free,o,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,x,o,x,o,x,o,free,o,x,o,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,x,o,x,o,free,o,x,o,x,o,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,x,o,free,o,x,o,x,o,x,o,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,free,o,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,o,free,x,o,x,o,x,o,x,o,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,o,o,x,free,x,o,x,o,x,o,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,free,x,o,x,o,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,x,free,x,o,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,x,o,x,free,x,o,x,o,x,o,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,x,o,x,o,x,free,x,o,x,o,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,x,o,x,o,x,o,x,free,x,o,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,x,o,x,o,x,o,x,o,x,free,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,x,o,x,o,x,o,x,o,free,x,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,x,o,x,o,x,o,free,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,x,o,x,o,free,o,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,x,o,free,o,x,o,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,x,o,x,o,free,o,x,o,x,o,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,x,o,free,o,x,o,x,o,x,o,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,free,o,x,o,x,o,x,o,x,o,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,free,x,o,x,o,x,o,x,o,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,x,free,x,o,x,o,x,o,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,x,o,x,free,x,o,x,o,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,x,o,x,o,x,free,x,o,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,x,o,x,o,x,o,x,free,x,o,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,x,o,x,o,x,o,x,o,x,free,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,x,o,x,o,x,o,x,o,free,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,x,o,x,o,x,o,free,o,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,x,o,x,o,free,o,x,o,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,x,o,free,o,x,o,x,o,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,free,o,x,o,x,o,x,o,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,free,x,o,x,o,x,o,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,x,free,x,o,x,o,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,x,o,x,free,x,o,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,x,o,x,o,x,free,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,x,o,x,o,free,x,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,x,o,free,o,x,x,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,free,o,x,o,x,x,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,o,free,x,o,x,x,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,o,o,x,free,x,x,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,o,o,free,x,x,x,x,x,x,x,x,x,x]). }|0],[{init([o,o,o,o,o,o,o,o,o,o,free,x,x,x,x,x,x,x,x,x,x]). }|1],[{init([o,o,o,o,o,o,o,o,o,o,free,x,x,x,x,x,x,x,x,x,x]). }|1]]).
/*
counterexample(X) :- uniq |
ret = val(X, 
	     {
	E=[x,free |F] :- E=[free,x |F].
	E=[x,o,free |F] :- E=[free,o,x |F].
	E=[free,o |F] :- E=[o,free |F].
	E=[free,x,o |F] :- E=[o,x,free |F].
	     },
ba([0, 1], [d(0, true, 0), d(0, and(and(not(!Q), not(!R)), !P), 1), d(1, true, 1)], [0], [1])),
pred({!E0=[o,free,x |!F0]}, {}, !P),
pred({!E1=[o,x |!F1]}, {}, !Q),
pred({!E2=[x,o |!F2]}, {}, !R).
*/



% ------------------------------------------------------------------------------------------------------------------
% 入力: 反例、モデル、Buchiオートマトン
% 出力: 反例がBuchiオートマトンに受理され、かつモデルにも受理されるとき、まとそのときに限り"yes", それ以外の場合"no"

% 1.反例がBuchiオートマトンに受理される
% <=>反例中にループが1つ存在し、かつそのループ内のある状態を入力するとオートマトンが受理状態に遷移する
% 2.反例がモデルの(すべての状態を受理状態とする非決定性)オートマトンに受理される
% <=>反例のすべての遷移がモデルによって生成可能
% ------------------------------------------------------------------------------------------------------------------
Ret = val(Ce, {@r}, A) :- Ret = a(loop(v(Ce, {@r}), []), A).

% 
% Automaton
% 
Ret = in([$x|$g], $i) :- $i=$x, ground($g) |
    Ret = true.
Ret = in([$x|L], $i) :- $i=\=$x |
    Ret = in(L, $i).
Ret = in([], $i) :- int($i) | Ret = false.

Ret = a(ce([s(S,X_,I)|L], X), ba(Q, D, [$ini], Ac)) :- int($ini) |
    Ret = a_0(L, f, X, s(S, X_, I), ba(Q, D, [$ini], Ac), [$ini]).

Ret = a_0(L, F, X, s(S, $i, X_), Ba, Suc) :- int($i) |
    Ret = a_1_(L, F, X, s(S, $i, X_), Ba, in(Suc, $i)).

Ret = a_1_(L, f, X, S, Ba, true) :-
    Ret = a_1(L, f, X, S, Ba, true).
Ret = a_1_(L, t, X, s(S, $i, X_), ba(Q, D, Ini, Ac), true) :- int($i) |
    Ret = a_2(L, t, X, s(S, $i, X_), ba(Q, D, Ini, Ac), [], true).

Ret = a_2(L, t, X, s(S, $i, X_), ba(Q, D, Ini, [$x|Ac]), L_, true) :- $i=$x | Ret = fin(L, X, S, X_, Q, D, Ini, Ac, L_).
Ret = a_2(L, t, X, s(S, $i, X_), ba(Q, D, Ini, [$x|Ac]), L_, true) :- $i=\=$x |
    Ret = a_2(L, t, X, s(S, $i, X_), ba(Q, D, Ini, Ac), [$x|L_], true).
Ret = a_2(L, t, X, S, ba(Q, D, Ini, []), L_, true) :-
    Ret = a_1(L, t, X, S, ba(Q, D, Ini, L_), true).


Ret = a_1([s(S_, I, X_)|L], $f, '.'($i_, $x), s(S, $i, $x_), ba(Q, D, Ini, Ac), true) :- $x=$x_, $i=$i_, unary($f), int($i) |
    Ret = a_0(L, t, '.'($i_, $x), s(S_, I, X_), ba(Q, copy_props(D, D_), Ini, Ac), basucc($i, D_, S, [])).

Ret = a_1([s(S_, I, X_)|L], F, '.'($i_, $x), s(S, $i, $x_), ba(Q, D, Ini, Ac), true) :- $x=\=$x_, $i=\=$i_ |
    Ret = a_0(L, F, '.'($i_, $x), s(S_, I, X_), ba(Q, copy_props(D, D_), Ini, Ac), basucc($i, D_, S, [])).

Ret = a_1([s(S_, I, X_)|L], F, '.'($i_, $x), s(S, $i, $x_), ba(Q, D, Ini, Ac), true) :- $x=\=$x_, $i=$i_ |
    Ret = a_0(L, F, '.'($i_, $x), s(S_, I, X_), ba(Q, copy_props(D, D_), Ini, Ac), basucc($i, D_, S, [])).

Ret = a_1([s(S_, I, X_)|L], F, '.'($i_, $x), s(S, $i, $x_), ba(Q, D, Ini, Ac), true) :- $x=$x_, $i=\=$i_ |
    Ret = a_0(L, F, '.'($i_, $x), s(S_, I, X_), ba(Q, copy_props(D, D_), Ini, Ac), basucc($i, D_, S, [])).



copy_props([], D1, D2) :-
    D1 = [], D2 = [].
copy_props([d($src, P, $dst) | T], D1, D2) :- int($src), int($dst) |
    D1 = [d($src, P1, $dst) | T1], D2 = [d($src, P2, $dst) | T2],
    copy_prop(P, P1, P2), copy_props(T, T1, T2).

copy_prop(true, P1, P2) :-
    P1 = true, P2 = true.
copy_prop(false, P1, P2) :-
    P1 = false, P2 = false.
copy_prop(not(X), P1, P2) :-
    P1 = not(L1), P2 = not(L2),
    copy_prop(X, L1, L2).
copy_prop($x, P1, P2) :- hlink($x) |
    P1 = $x, P2 = $x.
copy_prop(and(X, Y), P1, P2) :-
    P1 = and(L1, L2), P2 = and(L1_, L2_),
    copy_prop(X, L1, L1_),
    copy_prop(Y, L2, L2_).
copy_prop(or(X, Y), P1, P2) :-
    P1 = not(and(not(L1), not(L2))), P2 = not(and(not(L1_), not(L2_))),
    copy_prop(X, L1, L1_),
    copy_prop(Y, L2, L2_).
copy_prop(imply(X, Y), P1, P2) :-
    P1 = not(and(L1, not(L2))), P2 = not(and(L1_, not(L2_))),
    copy_prop(X, L1, L1_),
    copy_prop(Y, L2, L2_).


delete_prop(true) :- .
delete_prop(false) :- .
delete_prop(not(X)) :- delete_prop(X).
delete_prop($x) :- hlink($x) | .
delete_prop(and(X, Y)) :- delete_prop(X), delete_prop(Y).
delete_prop(or(X, Y)) :- delete_prop(X), delete_prop(Y).
delete_prop(imply(X, Y)) :- delete_prop(X), delete_prop(Y).


% basucc----------------------------------------------------------------------
Ret = basucc($q, [d($n, F, $nn)|T], {$s[]}, RetS) :-
    $n=:=$q, int($nn) |
    Ret = basucc($q, T, {$s[]}, RetS, inner_basucc(F, {$s[]}, $nn)).

Ret = basucc($q, [d($n, F, $nn)|T], S, RetS) :-
    $q =\= $n, int($nn) |
    Ret = basucc($q, T, S, RetS), delete_prop(F).

Ret = basucc($q, [], {$s[]}, RetS) :-
    int($q) |
    Ret = RetS.

Ret = basucc(Q, D, S, RetS, true(N)) :-
    Ret = basucc(Q, D, S, [N|RetS]).

Ret = basucc(Q, D, S, RetS, fail($n)) :-
    int($n) |
    Ret = basucc(Q, D, S, RetS).

% inner_basucc----------------------------------------------------------------------
Ret = inner_basucc(and(X, Y), {$s[]}, $n) :- int($n) |
    Ret = and_inner_basucc(inner_basucc(X, {$s[]}, $n), inner_basucc(Y, {$s[]}, $n)).

Ret = and_inner_basucc(true($n), true($m)) :- int($n), int($m) |
    Ret = true($n).
Ret = and_inner_basucc(true($n), fail($m)) :- int($n), int($m) |
    Ret = fail($n).
Ret = and_inner_basucc(fail($n), true($m)) :- int($n), int($m) |
    Ret = fail($n).
Ret = and_inner_basucc(fail($n), fail($m)) :- int($n), int($m) |
    Ret = fail($n).

Ret = not(true(N)) :-
	Ret = fail(N).
Ret = not(fail(N)) :-
	Ret = true(N).

Ret = inner_basucc(not(X), S, N) :-
	Ret = not(inner_basucc(X, S, N)).

Ret = inner_basucc($x, S, N), pred({$h[]}, {$g[]}, $y) :- hlink($x), $x == $y |
    Ret = t_inner_basucc(state_space.react_nd_set({':-'({$h[]}, {$g[]}, {$h[]})}, S, p($x)), N).

Ret = inner_basucc($x, S, N), p($y) = Pred :- hlink($x), $x == $y |
    Ret = t_inner_basucc(state_space.react_nd_set(Pred, S, p($x)), N).

Ret = inner_basucc(true, {$s[]}, N) :-
    Ret = true(N).

Ret = inner_basucc(false, {$s[]}, N) :-
    Ret = fail(N).

Ret = t_inner_basucc([], N) :-
    Ret = fail(N).
Ret = t_inner_basucc([{$g[]}|T], N) :-
    Ret = true(N), free(T).

% 
% Loop
% 

Ret = loop(true([s({$s[]},$x,$i)|L]), X) :- int($i), int($x) |
    Ret = lo(L, l(F, B), set.insert(set.init, '.'($x,$i)), X), '.'(s({$s[]},$x,$i), B, F).

Ret = lo([s(S,$x,$i)|L], R, Set, X) :- int($i), int($x) |
    Ret = lo_0([s(S,$x,$i)|L], R, set.find(Set, '.'($x, $i), Rs), Rs, X).
Ret = lo([], l(F, B), Set, ['.'(X, I)]):- 
    Ret = ce(F, '.'(X, I)), B=[], set.free(Set).

Ret = lo_0([s({$s[]},$x,$i)|L], l(F, B), Set, none, X_), '.'(X, B_, F_), B=B_ :- int($i), int($x) |
    Ret = lo(L, l(F, B), set.insert(Set, '.'($x,$i)), X_), '.'(X, B_, F_), '.'(s({$s[]},$x,$i), B, B_).
Ret = lo_0([s({$s[]},$x,$i)|L], l(F, B), Set, some, X_), '.'(X, B_, F_), B=B_ :- int($i), int($x) |
    Ret = lo(L, l(F, B), Set, ['.'($x, $i)|X_]), '.'(X, B_, F_), '.'(s({$s[]},$x,$i), B, B_).


% 
% Model
% 

del([{$s[]}|L]) :- del(L).
del([]) :- .

Ret = v([[{$s[]}|$x]|L], Rs) :- int($x) | 
    Ret = run({$s[]}, L, Rs, state_space.state_map_find(state_space.state_map_init, {$s[]}, I), l(F, B)), '.'(s({$s[]}, $x, I), B, F).

Ret = run({$s[]}, [[{$dst[]}|$x]|L], Rs, M, R_) :- int($x) | 
    Ret = run_({$s[]}, [{$dst[]}|$x], I, L, Rss, state_space.react_nd_set(Rs, {$s[]}, Rss), state_space.state_map_find(M, {$dst[]}, I), R_).
Ret = run({$s[]}, [], {@r}, M, l(F, B)) :- Ret = true(F), B=[], free(M).

Ret = run_({$s[]}, D, I, L, Rs, [D_|LL], M, R_) :- 
    Ret = run_0(D, I, L, Rs, [D_|LL], M, R_).
% stutter extension
Ret = run_({$s[]}, D, I, L, Rs, [], M, R_) :- 
    Ret = run_0(D, I, L, Rs, [{$s[]}], M, R_).

Ret = run_0(D, I, L, Rs, [{$d[]}|LL], M, R_) :- 
    Ret = run_1(D, I, L, Rs, LL, I_, state_space.state_map_find(M, {$d[]}, I_), R_).
Ret = run_0(D, I, L, Rs, [], M, R_) :- 
    Ret = false(D, I, L, Rs, M, R_).

Ret = run_1([{$d[]}|$x], $i, L, Rs, LL, $i_, M, l(F, B)), '.'(X, B_, F_), B=B_ :- $i=$i_, int($x)| 
    Ret = run({$d[]}, L, Rs, M, l(F, B)), '.'(X, B_, F_), '.'(s({$d[]},$x,$i), B, B_), del(LL).
Ret = run_1(D, $i, L, Rs, LL, $i_, M, R_) :- $i=\=$i_ | Ret = run_0(D, $i, L, Rs, LL, M, R_).


